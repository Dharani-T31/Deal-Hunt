<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Price Comparison</title>
<style>
body { font-family: Arial; background:#f3f4f6; margin:0; padding:0;}
.header {background: linear-gradient(90deg,#ff7eb3,#6a11cb); color:white; text-align:center; padding:20px; font-size:28px; font-weight:bold;}
.form-container {text-align:center; padding:20px;}
.form-container input {padding:12px; width:300px; border:1px solid #ccc; border-radius:5px;}
.form-container button {padding:12px 20px; background:#6a11cb; color:white; border:none; border-radius:5px; cursor:pointer;}
.results-container {display:flex; justify-content:center; gap:20px; flex-wrap:wrap; padding:20px;}
.card {flex:1; min-width:250px; max-width:300px; border-radius:10px; padding:15px; color:white;}
.amazon {background-color:#ff9900;}
.flipkart {background-color:#2874f0;}
.myntra {background-color:#ff3f6c;}
.snapdeal {background-color:#f36f21;}
.ajio {background-color:#00bcd4;}
.product {background:white; color:black; border-radius:8px; padding:10px; margin-bottom:10px; text-align:center;}
.product img {width:150px; height:150px; object-fit:contain; margin-bottom:5px;}
.buy-btn {display:inline-block; margin-top:8px; padding:8px 14px; background:#6a11cb; color:white; text-decoration:none; border-radius:6px; font-weight:bold;}
</style>
</head>
<body>

<div class="header">ðŸ›’Price Comparison</div>

<div class="form-container">
<form method="POST">
<input type="text" name="product" placeholder="Search for a product..." required>
<button type="submit">Search</button>
</form>
</div>

<!-- Overall Best Deal -->
{% if overall_best_deal %}
<div style="text-align:center; margin:20px; padding:20px; background:#ffd700; border-radius:10px;">
    <h2 style="margin:0;">ðŸ”¥ Overall Best Deal!</h2>
    <div class="product" style="display:inline-block; margin-top:10px; background:white;">
        <img src="{{ overall_best_deal['Image'] }}" style="width:150px; height:150px; object-fit:contain;">
        <p><strong>{{ overall_best_deal['Product'] }}</strong></p>
        <p>Price: â‚¹{{ overall_best_deal['Price'] }}</p>
        <p>From: {{ overall_best_deal['Website'] }}</p>
        <a href="{{ overall_best_deal['Link'] }}" class="buy-btn" target="_blank">Buy Now</a>
    </div>
</div>
{% endif %}

<!-- Website Cards -->
{% if results %}
<div class="results-container">
{% set websites = ['Amazon','Flipkart','Myntra','Snapdeal','Ajio'] %}
{% set colors = {'Amazon':'amazon','Flipkart':'flipkart','Myntra':'myntra','Snapdeal':'snapdeal','Ajio':'ajio'} %}
{% for site in websites %}
{% set items = results|selectattr("Website","equalto",site)|list %}
{% if items %}
<div class="card {{ colors[site] }}">
<h2>
  {{ site }}
  {% if best_deals_by_site.get(site) %}
    (Best Deal â€“ â‚¹{{ best_deals_by_site[site]['Price'] }})
  {% endif %}
</h2>
{% for item in items %}
<div class="product">
<img src="{{ item['Image'] }}">
<p><strong>{{ item['Product'] }}</strong></p>
<p>Price: â‚¹{{ item['Price'] }}</p>
<a href="{{ item['Link'] }}" class="buy-btn" target="_blank">Buy</a>
</div>
{% endfor %}
</div>
{% endif %}
{% endfor %}
</div>
{% endif %}

</body>
</html>
